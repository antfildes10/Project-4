{% extends "admin/base.html" %}
{% load static %}

{% block title %}{% if subtitle %}{{ subtitle }} | {% endif %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" type="text/css" href="{% static 'css/admin-custom.css' %}">
{% endblock %}

{% block branding %}
<h1 id="site-name"><a href="{% url 'admin:index' %}">{{ site_header|default:_('Django administration') }}</a></h1>
{% endblock %}

{% block nav-global %}{% endblock %}

{% block usertools %}
<div id="user-tools">
    <div class="user-dropdown">
        <button class="user-dropdown-toggle" id="userDropdownBtn">
            <i class="fas fa-user-circle"></i>
            <span>{{ user.get_username }}</span>
            <i class="fas fa-chevron-down"></i>
        </button>
        <div class="user-dropdown-menu" id="userDropdownMenu">
            {% if site_url %}
                <a href="{{ site_url }}" class="dropdown-item">
                    <i class="fas fa-external-link-alt"></i>
                    View site
                </a>
            {% endif %}
            {% if has_permission %}
                <a href="{% url 'admin:password_change' %}" class="dropdown-item">
                    <i class="fas fa-key"></i>
                    Change password
                </a>
            {% endif %}
            <a href="{% url 'admin:logout' %}" class="dropdown-item">
                <i class="fas fa-sign-out-alt"></i>
                Log out
            </a>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const dropdownBtn = document.getElementById('userDropdownBtn');
    const dropdownMenu = document.getElementById('userDropdownMenu');

    if (dropdownBtn && dropdownMenu) {
        dropdownBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            dropdownMenu.classList.toggle('show');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function() {
            dropdownMenu.classList.remove('show');
        });
    }
});
</script>
{% endblock %}
